# MAL – 阴历生日倒计时与回忆画廊

一个优雅的网页应用，用于记录重要日子（如相识纪念日），并支持 **阴历 / 阳历** 生日倒计时。现已升级，支持将历年专属生日网站作为礼物归档，并通过“回忆画廊”随时回顾。🎂🌙

## ✨ 功能亮点

- **回忆画廊**：通过精美的卡片式画廊，随时回顾和访问历年专属生日网站。
- **阴历 / 阳历双模式**：一键切换生日计时方式。
- **自动阴阳历转换**：基于 lunar-javascript 动态换算，无需手动计算。
- **智能闰月处理**：遇到闰月年份自动识别并依次倒数两个生日。
- **专属生日祝福**：生日当天自动展示独特的动态彩色祝福语，取代倒计时。
- **高度可定制化**：所有纪念日、人员、生日、背景及文案均在独立的配置区修改，无需触碰核心代码。
- **统一网络时间**：调用 TimeAPI 保证多端时间一致，倒数更精确。
- **每日一言**：每次加载页面时，从一言 API 自动获取一条名言，增添人文气息。
- **动画视觉**：数字翻牌、界面淡入淡出及玻璃拟态卡片，交互流畅自然。
- **响应式布局**：主页与生日页均完美适配桌面与移动端，提供一致的浏览体验。


## 快速开始 (How to Use)

### 步骤 1：基础配置 (主页)

所有主页（倒计时页面）的自定义内容都集中在 `js/main.js` 文件顶部的 `CONFIG` 对象中。

```javascript
const CONFIG = {
  // 1. 主要纪念日倒计时的起始日期
  mainTargetDate: '2025-06-07T02:21:00',

  // 2. 人员信息配置 (可添加多人)
  people: [
    { key: 'mikasa', name: 'Mikasa', birthMonth: 4, birthDay: 11, isLunar: false },
    { key: 'linlin', name: '琳琳', birthMonth: 6, birthDay: 19, isLunar: true },
  ],

  // 3. 背景图片
  backgrounds: {
    desktop: 'image/pc.jpg',
    mobile: 'image/m.jpg'
  },
  // ... 其他配置
};
```

### 步骤 2：如何添加新一年的生日网站 (核心流程)

假设您要为2026年创建一个新的生日网站：

1.  **创建年份文件夹**：在 `archives` 文件夹内，新建一个名为 `2026` 的文件夹。
2.  **放入网站文件**：将您为2026年制作的全新生日网站的所有文件（如 `index.html`, `style.css`, `app.js`, 相关图片、音乐等）放入 `archives/2026` 文件夹中。
3.  **注册到回忆画廊**：打开 `js/main.js` 文件，在顶部的 `GALLERY_CONFIG` 数组中，仿照 `2025` 的格式，添加一个关于 `2026` 的新对象。例如：

    ```javascript
    const GALLERY_CONFIG = [
        {
            year: "2025",
            title: "愿你拥有搞砸一些事的勇气",
            imageUrl: "image/m.jpg", // 卡片封面图
            pageUrl: "archives/2025/index.html" // 网站路径
        },
        {
            year: "2026", // 新增年份
            title: "这里是2026年的祝福标题", // 新增标题
            imageUrl: "image/pc.jpg", // 为2026年选一张新的封面图
            pageUrl: "archives/2026/index.html" // 指向2026年网站的路径
        }
    ];
    ```

完成以上三步，主页的“回忆画廊”中就会自动出现一张指向2026年网站的新卡片。


## 🛠 更新日志

### v1.5.1 · 2025-09-11

#### 🚀 优化与修复
- **优化移动端布局**：通过为`<body>`添加`padding-bottom`和`box-sizing`属性，解决了在小屏幕设备上，主页计时盒子可能被底部`footer`遮挡的问题。
- **增强生日页响应式**：通过修正`clamp()`函数和添加媒体查询（`@media`），全面优化了生日页在手机、平板等不同分辨率设备上的文字显示效果，确保内容始终美观居中。


### v1.5 · 2025-09-10
#### ✨ 新增功能
- **回忆画廊**：新增“生日回顾”按钮与弹出式画廊，以精美的卡片形式展示和链接到历年专属生日网站。

#### 🚀 重构
- **项目结构化归档**：创建 `archives` 目录，用于收纳和管理历年独立的生日网站，使项目结构更清晰，易于扩展。
- **资源封装**：将2025年生日网站及其依赖的MP3等资源完全封装进其专属年份目录，实现了模块化管理。

#### ✅ 修复
- **修复严重加载BUG**：通过为脚本添加 `defer` 属性，解决了因脚本执行时机不当而导致生日页卡在“加载中”画面的问题。
- **修复资源路径错误**：修正了因文件结构调整后，生日页面无法找到网站图标（favicon）的路径问题。

### v1.4 · 2025-06-22
#### ✨ 新增功能
- **生日祝福界面**：当访问个人倒计时页面且当天恰好是其生日时，原有的倒计时将替换为一个带有彩色渐变文字的“生日快乐”祝福界面，提供独特的生日惊喜。
- **独立的返回按钮**：在个人倒计时页面左上角新增了一个设计简约的返回按钮，取代了原先标题旁的文字链接，提升了用户体验和页面美观度。

#### 🚀 重构
- **中央化配置**：所有可自定义的数据（如：纪念日、人员生日、背景图片、页脚版权）已全部抽离至一个独立的 `CONFIG` 对象中，现在只需在一个地方即可快速完成所有信息的修改，无需改动任何核心代码。
- **模块化设计**：代码被重构为“配置”、“逻辑服务”和“视图渲染”三大分离的模块，极大地提升了代码的可读性、可维护性和未来扩展的便捷性。
- **注释规范化**：为所有核心函数添加了完整的 JSDoc 注释，使代码逻辑和功能一目了然。

### v1.3.1 · 2025-06-22

#### ✨ 新增功能：
- 更新了网站的 **logo**，优化了图标的视觉效果。
- 添加了 **每日一言**，每次加载时显示新的每日名言。
- 在页面底部添加了 **footer copyright** 信息，提升网站的专业感。
  
#### 🔨 优化：
- 全站进行了 **移动端适配**，确保在不同设备上都能流畅访问。
  
#### ✅ 修复：
- 修复了部分页面在小屏设备上的布局问题。


### v1.3 · 2025-06-22
#### ✨ 新增
- **加载动画**：新增加载动画，加载时显示旋转的圆环和“加载中...”文字，加载完成后平滑过渡到正计时页面   

#### 🔨 优化
- **前端代码结构优化**：对加载动画相关的代码进行了模块化和结构化，使得代码更易于维护和扩展    

#### ✅ 修复
- 解决了加载过程中出现短暂的空白问题，提升了加载体验的流畅度  

### v1.2 · 2025-06-20
#### ✨ 新增
- 支持为每个人独立选择阴历 / 阳历生日  

#### 🔨 优化
- **重构前端代码结构**：模块拆分、语义化变量、注释完善，可读性与可维护性全面提升  
- 视觉层级调整，样式变量集中管理，整体更加美观  

#### ✅ 修复
- 统一网络时间，解决本地时差导致的倒计时误差  
- 修复阴历 ↔ 阳历切换后倒计时闪跳问题  

### v1.1 · 2025-06-19
#### ✨ 新增
- 自动识别闰月，若一年出现两次同月生日则依次倒数并提示  
#### ✅ 修复
- 修正部分闰月年份阴历转阳历错误  


> **依赖**  
> - [lunar-javascript](https://github.com/6tail/lunar-javascript) – 阴历/阳历转换  
> - [TimeAPI.io](https://timeapi.io) – 网络时间同步  
> - [Three.js](https://threejs.org/) & [GSAP](https://gsap.com/) - 用于生日页动画