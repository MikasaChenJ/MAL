# MAL – 阴历生日倒计时与回忆画廊

一个优雅的网页应用，用于记录重要日子（如相识纪念日），并支持 **阴历 / 阳历** 生日倒计时。现已升级，支持将历年专属生日网站作为礼物归档，并通过“回忆画廊”随时回顾。🎂🌙

## ✨ 功能亮点

- **回忆画廊**：通过精美的卡片式画廊，随时回顾和访问历年专属生日网站。
- **阴历 / 阳历双模式**：一键切换生日计时方式。
- **自动阴阳历转换**：基于 lunar-javascript 动态换算，无需手动计算。
- **智能闰月处理**：遇到闰月年份自动识别并依次倒数两个生日。
- **专属生日祝福**：生日当天自动展示独特的动态彩色祝福语，取代倒计时。
- **高度可定制化**：所有纪念日、人员、生日、背景及文案均在独立的配置区修改，无需触碰核心代码。
- **统一网络时间**：调用 TimeAPI 保证多端时间一致，倒数更精确。
- **每日一言**：每次加载页面时，从一言 API 自动获取一条名言，增添人文气息。
- **动画视觉**：数字翻牌、界面淡入淡出及玻璃拟态卡片，交互流畅自然。
- **响应式布局**：主页与生日页均完美适配桌面与移动端，提供一致的浏览体验。


## 快速开始 (How to Use)

### 步骤 1：基础配置 (主页)

所有主页（倒计时页面）的自定义内容都集中在 `js/main.js` 文件顶部的 `CONFIG` 对象中。

```javascript
const CONFIG = {
  // 1. 主要纪念日倒计时的起始日期
  mainTargetDate: '2025-06-07T02:21:00',

  // 2. 人员信息配置 (可添加多人)
  people: [
    { key: 'mikasa', name: 'Mikasa', birthMonth: 4, birthDay: 11, isLunar: false },
    { key: 'linlin', name: '琳琳', birthMonth: 6, birthDay: 19, isLunar: true },
  ],

  // 3. 背景图片
  backgrounds: {
    desktop: 'image/pc.jpg',
    mobile: 'image/m.jpg'
  },
  // ... 其他配置
};
```

### 步骤 2：如何添加新一年的生日网站 (核心流程)

假设您要为2026年创建一个新的生日网站：

1.  **创建年份文件夹**：在 `archives` 文件夹内，新建一个名为 `2026` 的文件夹。
2.  **放入网站文件**：将您为2026年制作的全新生日网站的所有文件（如 `index.html`, `style.css`, `app.js`, 相关图片、音乐等）放入 `archives/2026` 文件夹中。
3.  **注册到回忆画廊**：打开 `js/main.js` 文件，在顶部的 `GALLERY_CONFIG` 数组中，仿照 `2025` 的格式，添加一个关于 `2026` 的新对象。例如：

    ```javascript
    const GALLERY_CONFIG = [
        {
            year: "2025",
            title: "愿你拥有搞砸一些事的勇气",
            imageUrl: "image/m.jpg", // 卡片封面图
            pageUrl: "archives/2025/index.html" // 网站路径
        },
        {
            year: "2026", // 新增年份
            title: "这里是2026年的祝福标题", // 新增标题
            imageUrl: "image/pc.jpg", // 为2026年选一张新的封面图
            pageUrl: "archives/2026/index.html" // 指向2026年网站的路径
        }
    ];
    ```

完成以上三步，主页的“回忆画廊”中就会自动出现一张指向2026年网站的新卡片。


## 🛠 更新日志

### v1.5 · 2025-09-10
#### ✨ 新增功能
- **回忆画廊**：新增“生日回顾”按钮与弹出式画廊，以精美的卡片形式展示和链接到历年专属生日网站。

#### 🚀 重构
- **项目结构化归档**：创建 `archives` 目录，用于收纳和管理历年独立的生日网站，使项目结构更清晰，易于扩展。
- **资源封装**：将2025年生日网站及其依赖的MP3等资源封装成一个独立的模块，降低了耦合度。

#### ✅ 修复
- **修复响应式布局问题**：通过修正`clamp()`函数和添加媒体查询（`@media`），全面优化了生日页在手机、平板等不同分辨率设备上的显示效果。
- **修复加载BUG**：通过为脚本添加 `defer` 属性，解决了因脚本执行时机不当而导致生日页卡在“加载中”画面的严重BUG。

### v1.4 · 2025-06-22
#### ✨ 新增功能
- 生日祝福界面：当访问个人倒计时页面且当天恰好是其生日时，原有的倒计时将替换为一个带有彩色渐变文字的“生日快乐”祝福界面，提供独特的生日惊喜。
- 独立的返回按钮：在个人倒计时页面左上角新增了一个设计简约的返回按钮，取代了原先标题旁的文字链接，提升了用户体验和页面美观度。
#### 🚀 重构
- 中央化配置：所有可自定义的数据（如：纪念日、人员生日、背景图片、页脚版权）已全部抽离至一个独立的 CONFIG 对象中，现在您只需在一个地方即可快速完成所有信息的修改，无需改动任何核心代码。
- 模块化设计：代码被重构为“配置”、“逻辑服务”和“视图渲染”三大分离的模块，极大地提升了代码的可读性、可维护性和未来扩展的便捷性。
- 注释规范化：为所有核心函数添加了完整的 JSDoc 注释，使代码逻辑和功能一目了然。

(v1.3.1 及更早的日志省略)


> **依赖**  
> - [lunar-javascript](https://github.com/6tail/lunar-javascript) – 阴历/阳历转换  
> - [TimeAPI.io](https://timeapi.io) – 网络时间同步  
> - [Three.js](https://threejs.org/) & [GSAP](https://gsap.com/) - 用于生日页动画